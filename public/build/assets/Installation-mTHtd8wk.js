import{a4 as _e,E as ae,s as W,a1 as A,f as z,k,r as b,o as q,m as M,w as d,b as B,c as U,t as P,p as N,K as E,N as ie,O as oe,a,J as O,v as G,a7 as ge,Y as Q,l as e,ac as le,ad as re,H as j,a5 as te,g as h,h as V,ar as ne,j as R,q as T,Z as se,u as de,a3 as ue,i as X,n as K,M as ve,I as be,ag as $e,a0 as we,G as pe,ai as me,e as fe,aS as ye}from"./main-q-Vi2wV1.js";import{u as ee}from"./mail-driver-oRoVIHQf.js";const Y=(o=!1)=>{const S=o?window.pinia.defineStore:_e,D=ae();return S({id:"installation",state:()=>({currentDataBaseData:{database_connection:"mysql",database_hostname:"127.0.0.1",database_port:"3306",database_name:null,database_username:null,database_password:null,app_url:window.location.origin}}),actions:{fetchInstallationRequirements(){return new Promise((i,s)=>{W.get("/api/v1/installation/requirements").then(t=>{i(t)}).catch(t=>{A(t),s(t)})})},fetchInstallationStep(){return new Promise((i,s)=>{W.get("/api/v1/installation/wizard-step").then(t=>{i(t)}).catch(t=>{A(t),s(t)})})},addInstallationStep(i){return new Promise((s,t)=>{W.post("/api/v1/installation/wizard-step",i).then(v=>{s(v)}).catch(v=>{A(v),t(v)})})},fetchInstallationPermissions(){return new Promise((i,s)=>{W.get("/api/v1/installation/permissions").then(t=>{i(t)}).catch(t=>{A(t),s(t)})})},fetchInstallationDatabase(i){return new Promise((s,t)=>{W.get("/api/v1/installation/database/config",{params:i}).then(v=>{s(v)}).catch(v=>{A(v),t(v)})})},addInstallationDatabase(i){return new Promise((s,t)=>{W.post("/api/v1/installation/database/config",i).then(v=>{s(v)}).catch(v=>{A(v),t(v)})})},addInstallationFinish(){return new Promise((i,s)=>{W.post("/api/v1/installation/finish").then(t=>{i(t)}).catch(t=>{A(t),s(t)})})},setInstallationDomain(i){return new Promise((s,t)=>{W.put("/api/v1/installation/set-domain",i).then(v=>{s(v)}).catch(v=>{A(v),t(v)})})},installationLogin(){return new Promise((i,s)=>{W.get("/sanctum/csrf-cookie").then(t=>{t&&W.post("/api/v1/installation/login").then(v=>{D.setSelectedCompany(v.data.company),i(v)}).catch(v=>{A(v),s(v)})})})},checkAutheticated(){return new Promise((i,s)=>{W.get("/api/v1/auth/check").then(t=>{i(t)}).catch(t=>{s(t)})})}}})()},he={class:"w-full md:w-2/3"},Ie={class:"mb-6"},qe={key:0,class:"grid grid-flow-row grid-cols-3 p-3 border border-gray-200 lg:gap-24 sm:gap-4"},Ce={class:"col-span-2 text-sm"},Be={class:"text-right"},Ve={key:0,class:"inline-block w-4 h-4 ml-3 mr-2 bg-green-500 rounded-full"},De={key:1,class:"inline-block w-4 h-4 ml-3 mr-2 bg-red-500 rounded-full"},Se={key:1},Fe={class:"col-span-2 text-sm"},Me={class:"text-right"},ze={key:0,class:"inline-block w-4 h-4 ml-3 mr-2 bg-green-500 rounded-full"},ke={key:1,class:"inline-block w-4 h-4 ml-3 mr-2 bg-red-500 rounded-full"},Ue={__name:"Step1RequirementsCheck",emits:["next"],setup(o,{emit:S}){const D=S,i=z(""),s=z(""),t=z(!1);z(!0);const v=Y(),c=k(()=>{if(i.value){let u=!0;for(const l in i.value)return i.value[l]||(u=!1),i.value&&s.value.supported&&u}return!1});async function p(){var l,I,n,g;t.value=!0;const u=await v.fetchInstallationRequirements();u.data&&(i.value=(n=(I=(l=u==null?void 0:u.data)==null?void 0:l.requirements)==null?void 0:I.requirements)==null?void 0:n.php,s.value=(g=u==null?void 0:u.data)==null?void 0:g.phpSupportInfo)}function r(){t.value=!0,D("next"),t.value=!1}return(u,l)=>{const I=b("BaseIcon"),n=b("BaseButton"),g=b("BaseWizardStep");return q(),M(g,{title:u.$t("wizard.req.system_req"),description:u.$t("wizard.req.system_req_desc")},{default:d(()=>[B("div",he,[B("div",Ie,[s.value?(q(),U("div",qe,[B("div",Ce,P(u.$t("wizard.req.php_req_version",{version:s.value.minimum})),1),B("div",Be,[N(P(s.value.current)+" ",1),s.value.supported?(q(),U("span",Ve)):(q(),U("span",De))])])):E("",!0),i.value?(q(),U("div",Se,[(q(!0),U(ie,null,oe(i.value,($,C)=>(q(),U("div",{key:C,class:"grid grid-flow-row grid-cols-3 p-3 border border-gray-200 lg:gap-24 sm:gap-4"},[B("div",Fe,P(C),1),B("div",Me,[$?(q(),U("span",ze)):(q(),U("span",ke))])]))),128))])):E("",!0)]),c.value?(q(),M(n,{key:0,onClick:r},{left:d($=>[a(I,{name:"ArrowRightIcon",class:O($.class)},null,8,["class"])]),default:d(()=>[N(P(u.$t("wizard.continue"))+" ",1)]),_:1})):E("",!0),i.value?E("",!0):(q(),M(n,{key:1,loading:t.value,disabled:t.value,onClick:p},{default:d(()=>[N(P(u.$t("wizard.req.check_req")),1)]),_:1},8,["loading","disabled"]))])]),_:1},8,["title","description"])}}},Pe={key:1,class:"relative"},Ne={class:"grid grid-flow-row grid-cols-3 lg:gap-24 sm:gap-4"},xe={class:"col-span-2 p-3"},Ee={class:"p-3 text-right"},Ge={key:0,class:"inline-block w-4 h-4 ml-3 mr-2 rounded-full bg-green-500"},Oe={key:1,class:"inline-block w-4 h-4 ml-3 mr-2 rounded-full bg-red-500"},Le={__name:"Step2PermissionCheck",emits:["next"],setup(o,{emit:S}){const D=S;let i=z(!1),s=z(!1),t=z([]);const{tm:v,t:c}=G.useI18n(),p=Y(),r=ge();Q(()=>{u()});async function u(){i.value=!0;const I=await p.fetchInstallationPermissions();t.value=I.data.permissions.permissions,I.data&&I.data.permissions.errors&&setTimeout(()=>{r.openDialog({title:v("wizard.permissions.permission_confirm_title"),message:c("wizard.permissions.permission_confirm_desc"),yesLabel:"OK",noLabel:"Cancel",variant:"danger",hideNoButton:!1,size:"lg"}).then(n=>{n.data&&(i.value=!1)})},500),i.value=!1}function l(){s.value=!0,D("next"),s.value=!1}return(I,n)=>{const g=b("BaseContentPlaceholdersText"),$=b("BaseContentPlaceholdersBox"),C=b("BaseContentPlaceholders"),m=b("BaseIcon"),_=b("BaseButton"),f=b("BaseWizardStep");return q(),M(f,{title:I.$t("wizard.permissions.permissions"),description:I.$t("wizard.permissions.permission_desc")},{default:d(()=>[e(i)?(q(),M(C,{key:0},{default:d(()=>[(q(),U(ie,null,oe(3,(w,y)=>B("div",{key:y,class:"grid grid-flow-row grid-cols-3 lg:gap-24 sm:gap-4 border border-gray-200"},[a(g,{lines:1,class:"col-span-4 p-3"})])),64)),a($,{rounded:!0,class:"mt-10",style:{width:"96px",height:"42px"}})]),_:1})):(q(),U("div",Pe,[(q(!0),U(ie,null,oe(e(t),(w,y)=>(q(),U("div",{key:y,class:"border border-gray-200"},[B("div",Ne,[B("div",xe,P(w.folder),1),B("div",Ee,[w.isSet?(q(),U("span",Ge)):(q(),U("span",Oe)),B("span",null,P(w.permission),1)])])]))),128)),le(a(_,{class:"mt-10",loading:e(s),disabled:e(s),onClick:l},{left:d(w=>[a(m,{name:"ArrowRightIcon",class:O(w.class)},null,8,["class"])]),default:d(()=>[N(" "+P(I.$t("wizard.continue")),1)]),_:1},8,["loading","disabled"]),[[re,!e(i)]])]))]),_:1},8,["title","description"])}}},We={class:"grid grid-cols-1 gap-5 md:grid-cols-2 lg:mb-6 md:mb-6"},Re={__name:"MysqlDatabase",props:{configData:{type:Object,require:!0,default:Object},isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,default:!1}},emits:["submit-data","on-change-driver"],setup(o,{emit:S}){const D=o,i=S,s=j(["sqlite","mysql","pgsql"]),{t}=G.useI18n(),v=te("utils"),c=Y();Q(()=>{for(const g in p.value)D.configData.hasOwnProperty(g)&&(p.value[g]=D.configData[g])});const p=k(()=>c.currentDataBaseData),r=g=>v.checkValidUrl(g),u={database_connection:{required:h.withMessage(t("validation.required"),V)},database_hostname:{required:h.withMessage(t("validation.required"),V)},database_port:{required:h.withMessage(t("validation.required"),V),numeric:ne},database_name:{required:h.withMessage(t("validation.required"),V)},database_username:{required:h.withMessage(t("validation.required"),V)},app_url:{required:h.withMessage(t("validation.required"),V),isUrl:h.withMessage(t("validation.invalid_url"),r)}},l=R(u,p.value);function I(){if(l.value.$touch(),l.value.$invalid)return!0;i("submit-data",p.value)}function n(){l.value.database_connection.$touch(),i("on-change-driver",p.value.database_connection)}return(g,$)=>{const C=b("BaseInput"),m=b("BaseInputGroup"),_=b("BaseMultiselect"),f=b("BaseIcon"),w=b("BaseButton");return q(),U("form",{action:"",onSubmit:T(I,["prevent"])},[B("div",We,[a(m,{label:g.$t("wizard.database.app_url"),error:e(l).app_url.$error&&e(l).app_url.$errors[0].$message,required:""},{default:d(()=>[a(C,{modelValue:p.value.app_url,"onUpdate:modelValue":$[0]||($[0]=y=>p.value.app_url=y),invalid:e(l).app_url.$error,type:"text"},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),a(m,{label:g.$t("wizard.database.connection"),error:e(l).database_connection.$error&&e(l).database_connection.$errors[0].$message,required:""},{default:d(()=>[a(_,{modelValue:p.value.database_connection,"onUpdate:modelValue":[$[1]||($[1]=y=>p.value.database_connection=y),n],invalid:e(l).database_connection.$error,options:s,"can-deselect":!1,"can-clear":!1},null,8,["modelValue","invalid","options"])]),_:1},8,["label","error"]),a(m,{label:g.$t("wizard.database.port"),error:e(l).database_port.$error&&e(l).database_port.$errors[0].$message,required:""},{default:d(()=>[a(C,{modelValue:p.value.database_port,"onUpdate:modelValue":$[2]||($[2]=y=>p.value.database_port=y),invalid:e(l).database_port.$error},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),a(m,{label:g.$t("wizard.database.db_name"),error:e(l).database_name.$error&&e(l).database_name.$errors[0].$message,required:""},{default:d(()=>[a(C,{modelValue:p.value.database_name,"onUpdate:modelValue":$[3]||($[3]=y=>p.value.database_name=y),invalid:e(l).database_name.$error},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),a(m,{label:g.$t("wizard.database.username"),error:e(l).database_username.$error&&e(l).database_username.$errors[0].$message,required:""},{default:d(()=>[a(C,{modelValue:p.value.database_username,"onUpdate:modelValue":$[4]||($[4]=y=>p.value.database_username=y),invalid:e(l).database_username.$error},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),a(m,{label:g.$t("wizard.database.password")},{default:d(()=>[a(C,{modelValue:p.value.database_password,"onUpdate:modelValue":$[5]||($[5]=y=>p.value.database_password=y),type:"password"},null,8,["modelValue"])]),_:1},8,["label"]),a(m,{label:g.$t("wizard.database.host"),error:e(l).database_hostname.$error&&e(l).database_hostname.$errors[0].$message,required:""},{default:d(()=>[a(C,{modelValue:p.value.database_hostname,"onUpdate:modelValue":$[6]||($[6]=y=>p.value.database_hostname=y),invalid:e(l).database_hostname.$error},null,8,["modelValue","invalid"])]),_:1},8,["label","error"])]),a(w,{type:"submit",class:"mt-4",loading:o.isSaving,disabled:o.isSaving},{left:d(y=>[o.isSaving?E("",!0):(q(),M(f,{key:0,name:"SaveIcon",class:O(y.class)},null,8,["class"]))]),default:d(()=>[N(" "+P(g.$t("wizard.save_cont")),1)]),_:1},8,["loading","disabled"])],32)}}},Te={class:"grid grid-cols-1 gap-5 md:grid-cols-2 lg:mb-6 md:mb-6"},Ae={__name:"PgsqlDatabase",props:{configData:{type:Object,require:!0,default:Object},isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,require:!0,default:!1}},emits:["submit-data","on-change-driver"],setup(o,{emit:S}){const D=o,i=S,s=j(["sqlite","mysql","pgsql"]),{t}=G.useI18n(),v=te("utils"),c=Y(),p=k(()=>c.currentDataBaseData);Q(()=>{for(const g in p.value)D.configData.hasOwnProperty(g)&&(p.value[g]=D.configData[g])});const r=g=>v.checkValidUrl(g),u={database_connection:{required:h.withMessage(t("validation.required"),V)},database_hostname:{required:h.withMessage(t("validation.required"),V)},database_port:{required:h.withMessage(t("validation.required"),V),numeric:ne},database_name:{required:h.withMessage(t("validation.required"),V)},database_username:{required:h.withMessage(t("validation.required"),V)},app_url:{required:h.withMessage(t("validation.required"),V),isUrl:h.withMessage(t("validation.invalid_url"),r)}},l=R(u,p.value);function I(){if(l.value.$touch(),l.value.$invalid)return!0;i("submit-data",p.value)}function n(){l.value.database_connection.$touch(),i("on-change-driver",p.value.database_connection)}return(g,$)=>{const C=b("BaseInput"),m=b("BaseInputGroup"),_=b("BaseMultiselect"),f=b("BaseIcon"),w=b("BaseButton");return q(),U("form",{action:"",onSubmit:T(I,["prevent"])},[B("div",Te,[a(m,{label:g.$t("wizard.database.app_url"),"content-loading":o.isFetchingInitialData,error:e(l).app_url.$error&&e(l).app_url.$errors[0].$message,required:""},{default:d(()=>[a(C,{modelValue:p.value.app_url,"onUpdate:modelValue":$[0]||($[0]=y=>p.value.app_url=y),"content-loading":o.isFetchingInitialData,invalid:e(l).app_url.$error,type:"text"},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),a(m,{label:g.$t("wizard.database.connection"),"content-loading":o.isFetchingInitialData,error:e(l).database_connection.$error&&e(l).database_connection.$errors[0].$message,required:""},{default:d(()=>[a(_,{modelValue:p.value.database_connection,"onUpdate:modelValue":[$[1]||($[1]=y=>p.value.database_connection=y),n],"content-loading":o.isFetchingInitialData,invalid:e(l).database_connection.$error,options:s,"can-deselect":!1,"can-clear":!1},null,8,["modelValue","content-loading","invalid","options"])]),_:1},8,["label","content-loading","error"]),a(m,{label:g.$t("wizard.database.port"),"content-loading":o.isFetchingInitialData,error:e(l).database_port.$error&&e(l).database_port.$errors[0].$message,required:""},{default:d(()=>[a(C,{modelValue:p.value.database_port,"onUpdate:modelValue":$[2]||($[2]=y=>p.value.database_port=y),"content-loading":o.isFetchingInitialData,invalid:e(l).database_port.$error},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),a(m,{label:g.$t("wizard.database.db_name"),"content-loading":o.isFetchingInitialData,error:e(l).database_name.$error&&e(l).database_name.$errors[0].$message,required:""},{default:d(()=>[a(C,{modelValue:p.value.database_name,"onUpdate:modelValue":$[3]||($[3]=y=>p.value.database_name=y),"content-loading":o.isFetchingInitialData,invalid:e(l).database_name.$error},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),a(m,{label:g.$t("wizard.database.username"),"content-loading":o.isFetchingInitialData,error:e(l).database_username.$error&&e(l).database_username.$errors[0].$message,required:""},{default:d(()=>[a(C,{modelValue:p.value.database_username,"onUpdate:modelValue":$[4]||($[4]=y=>p.value.database_username=y),"content-loading":o.isFetchingInitialData,invalid:e(l).database_username.$error},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),a(m,{"content-loading":o.isFetchingInitialData,label:g.$t("wizard.database.password")},{default:d(()=>[a(C,{modelValue:p.value.database_password,"onUpdate:modelValue":$[5]||($[5]=y=>p.value.database_password=y),"content-loading":o.isFetchingInitialData,type:"password"},null,8,["modelValue","content-loading"])]),_:1},8,["content-loading","label"]),a(m,{label:g.$t("wizard.database.host"),"content-loading":o.isFetchingInitialData,error:e(l).database_hostname.$error&&e(l).database_hostname.$errors[0].$message,required:""},{default:d(()=>[a(C,{modelValue:p.value.database_hostname,"onUpdate:modelValue":$[6]||($[6]=y=>p.value.database_hostname=y),"content-loading":o.isFetchingInitialData,invalid:e(l).database_hostname.$error},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"])]),le(a(w,{"content-loading":o.isFetchingInitialData,type:"submit",class:"mt-4",loading:o.isSaving,disabled:o.isSaving},{left:d(y=>[o.isSaving?E("",!0):(q(),M(f,{key:0,name:"SaveIcon",class:O(y.class)},null,8,["class"]))]),default:d(()=>[N(" "+P(g.$t("wizard.save_cont")),1)]),_:1},8,["content-loading","loading","disabled"]),[[re,!o.isFetchingInitialData]])],32)}}},je={class:"grid grid-cols-1 gap-5 md:grid-cols-2 lg:mb-6 md:mb-6"},Ye={__name:"SqliteDatabase",props:{configData:{type:Object,require:!0,default:Object},isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,require:!0,default:!1}},emits:["submit-data","on-change-driver"],setup(o,{emit:S}){const D=o,i=S,s=j(["sqlite","mysql","pgsql"]),{t}=G.useI18n(),v=te("utils"),c=Y(),p=k(()=>c.currentDataBaseData);Q(()=>{for(const g in p.value)D.configData.hasOwnProperty(g)&&(p.value[g]=D.configData[g])});const r=g=>v.checkValidUrl(g),u={database_connection:{required:h.withMessage(t("validation.required"),V)},database_name:{required:h.withMessage(t("validation.required"),V)},app_url:{required:h.withMessage(t("validation.required"),V),isUrl:h.withMessage(t("validation.invalid_url"),r)}},l=R(u,p.value);function I(){if(l.value.$touch(),l.value.$invalid)return!0;i("submit-data",p.value)}function n(){l.value.database_connection.$touch(),i("on-change-driver",p.value.database_connection)}return(g,$)=>{const C=b("BaseInput"),m=b("BaseInputGroup"),_=b("BaseMultiselect"),f=b("BaseIcon"),w=b("BaseButton");return q(),U("form",{action:"",onSubmit:T(I,["prevent"])},[B("div",je,[a(m,{label:g.$t("wizard.database.app_url"),"content-loading":o.isFetchingInitialData,error:e(l).app_url.$error&&e(l).app_url.$errors[0].$message,required:""},{default:d(()=>[a(C,{modelValue:p.value.app_url,"onUpdate:modelValue":$[0]||($[0]=y=>p.value.app_url=y),"content-loading":o.isFetchingInitialData,invalid:e(l).app_url.$error,type:"text"},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),a(m,{label:g.$t("wizard.database.connection"),"content-loading":o.isFetchingInitialData,error:e(l).database_connection.$error&&e(l).database_connection.$errors[0].$message,required:""},{default:d(()=>[a(_,{modelValue:p.value.database_connection,"onUpdate:modelValue":[$[1]||($[1]=y=>p.value.database_connection=y),n],"content-loading":o.isFetchingInitialData,invalid:e(l).database_connection.$error,options:s,"can-deselect":!1,"can-clear":!1},null,8,["modelValue","content-loading","invalid","options"])]),_:1},8,["label","content-loading","error"]),a(m,{label:g.$t("wizard.database.db_path"),error:e(l).database_name.$error&&e(l).database_name.$errors[0].$message,"content-loading":o.isFetchingInitialData,required:""},{default:d(()=>[a(C,{modelValue:p.value.database_name,"onUpdate:modelValue":$[2]||($[2]=y=>p.value.database_name=y),"content-loading":o.isFetchingInitialData,invalid:e(l).database_name.$error},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","error","content-loading"])]),le(a(w,{"content-loading":o.isFetchingInitialData,type:"submit",class:"mt-4",loading:o.isSaving,disabled:o.isSaving},{left:d(y=>[o.isSaving?E("",!0):(q(),M(f,{key:0,name:"SaveIcon",class:O(y.class)},null,8,["class"]))]),default:d(()=>[N(" "+P(g.$t("wizard.save_cont")),1)]),_:1},8,["content-loading","loading","disabled"]),[[re,!o.isFetchingInitialData]])],32)}}},Ze={components:{Mysql:Re,Pgsql:Ae,Sqlite:Ye},emits:["next"],setup(o,{emit:S}){const D=z("mysql"),i=z(!1),{t:s}=G.useI18n(),t=de(),v=Y(),c=k(()=>v.currentDataBaseData);async function p(u){let l={connection:u};const I=await v.fetchInstallationDatabase(l);I.data.success&&(c.value.database_connection=I.data.config.database_connection),u==="sqlite"?c.value.database_name=I.data.config.database_name:c.value.database_name=null}async function r(u){i.value=!0;try{let l=await v.addInstallationDatabase(u);if(i.value=!1,l.data.success){await v.addInstallationFinish(),S("next",3),t.showNotification({type:"success",message:s("wizard.success."+l.data.success)});return}else if(l.data.error){if(l.data.requirement){t.showNotification({type:"error",message:s("wizard.errors."+l.data.error,{version:l.data.requirement.minimum,name:u.value.database_connection})});return}t.showNotification({type:"error",message:s("wizard.errors."+l.data.error)})}else l.data.errors?t.showNotification({type:"error",message:l.data.errors[0]}):l.data.error_message&&t.showNotification({type:"error",message:l.data.error_message})}catch{t.showNotification({type:"error",message:s("validation.something_went_wrong")}),i.value=!1}finally{i.value=!1}}return{databaseData:c,database_connection:D,isSaving:i,getDatabaseConfig:p,next:r}}};function Je(o,S,D,i,s,t){const v=b("BaseWizardStep");return q(),M(v,{title:o.$t("wizard.database.database"),description:o.$t("wizard.database.desc"),"step-container":"w-full p-8 mb-8 bg-white border border-gray-200 border-solid rounded md:w-full"},{default:d(()=>[(q(),M(ue(i.databaseData.database_connection),{"config-data":i.databaseData,"is-saving":i.isSaving,onOnChangeDriver:i.getDatabaseConfig,onSubmitData:i.next},null,40,["config-data","is-saving","onOnChangeDriver","onSubmitData"]))]),_:1},8,["title","description"])}const Ke=se(Ze,[["render",Je]]),He={class:"w-full md:w-2/3"},Qe=B("p",{class:"mt-4 mb-0 text-sm text-gray-600"},"Notes:",-1),Xe=B("ul",{class:"w-full text-gray-600 list-disc list-inside"},[B("li",{class:"text-sm leading-8"},[N(" App domain should not contain "),B("b",{class:"inline-block px-1 bg-gray-100 rounded-sm"},"https://"),N(" or "),B("b",{class:"inline-block px-1 bg-gray-100 rounded-sm"},"http"),N(" in front of the domain. ")]),B("li",{class:"text-sm leading-8"},[N(" If you're accessing the website on a different port, please mention the port. For example: "),B("b",{class:"inline-block px-1 bg-gray-100"},"localhost:8080")])],-1),ea={__name:"Step4VerifyDomain",emits:["next"],setup(o,{emit:S}){const D=S,i=j({app_domain:window.location.origin.replace(/(^\w+:|^)\/\//,"")}),s=z(!1),{t}=G.useI18n(),v=te("utils"),c=n=>v.checkValidDomainUrl(n),p=Y(),r=de(),u={app_domain:{required:h.withMessage(t("validation.required"),V),isUrl:h.withMessage(t("validation.invalid_domain_url"),c)}},l=R(u,k(()=>i));async function I(){if(l.value.$touch(),l.value.$invalid)return!0;s.value=!0;try{await p.setInstallationDomain(i),await p.installationLogin(),(await p.checkAutheticated()).data&&D("next",4),s.value=!1}catch{r.showNotification({type:"error",message:t("wizard.verify_domain.failed")}),s.value=!1}}return(n,g)=>{const $=b("BaseInput"),C=b("BaseInputGroup"),m=b("BaseButton"),_=b("BaseWizardStep");return q(),M(_,{title:n.$t("wizard.verify_domain.title"),description:n.$t("wizard.verify_domain.desc")},{default:d(()=>[B("div",He,[a(C,{label:n.$t("wizard.verify_domain.app_domain"),error:e(l).app_domain.$error&&e(l).app_domain.$errors[0].$message,required:""},{default:d(()=>[a($,{modelValue:i.app_domain,"onUpdate:modelValue":g[0]||(g[0]=f=>i.app_domain=f),invalid:e(l).app_domain.$error,type:"text",onInput:g[1]||(g[1]=f=>e(l).app_domain.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"])]),Qe,Xe,a(m,{loading:s.value,disabled:s.value,class:"mt-8",onClick:I},{default:d(()=>[N(P(n.$t("wizard.verify_domain.verify_now")),1)]),_:1},8,["loading","disabled"])]),_:1},8,["title","description"])}}},aa={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},ta={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},na={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},ia={class:"grid grid-cols-1 gap-4 mb-6 md:grid-cols-2"},oa={__name:"SmtpMailDriver",props:{isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,require:!0,default:!1}},emits:["submit-data","on-change-driver"],setup(o,{emit:S}){const D=S;let i=z(!1);const s=j(["tls","ssl","starttls"]),{t}=G.useI18n(),v=ee(),c=k(()=>v.smtpConfig),p=k(()=>i.value?"text":"password");c.value.mail_driver="smtp";const r=k(()=>({smtpConfig:{mail_driver:{required:h.withMessage(t("validation.required"),V)},mail_host:{required:h.withMessage(t("validation.required"),V)},mail_port:{required:h.withMessage(t("validation.required"),V),numeric:h.withMessage(t("validation.numbers_only"),ne)},mail_encryption:{required:h.withMessage(t("validation.required"),V)},from_mail:{required:h.withMessage(t("validation.required"),V),email:h.withMessage(t("validation.email_incorrect"),X)},from_name:{required:h.withMessage(t("validation.required"),V)}}})),u=R(r,k(()=>v));async function l(){return u.value.$touch(),u.value.$invalid||D("submit-data",v.smtpConfig),!1}function I(){u.value.smtpConfig.mail_driver.$touch(),D("on-change-driver",v.smtpConfig.mail_driver)}return(n,g)=>{const $=b("BaseMultiselect"),C=b("BaseInputGroup"),m=b("BaseInput"),_=b("BaseIcon"),f=b("BaseButton");return q(),U("form",{onSubmit:T(l,["prevent"])},[B("div",aa,[a(C,{label:n.$t("wizard.mail.driver"),"content-loading":o.isFetchingInitialData,error:e(u).smtpConfig.mail_driver.$error&&e(u).smtpConfig.mail_driver.$errors[0].$message,required:""},{default:d(()=>[a($,{modelValue:c.value.mail_driver,"onUpdate:modelValue":[g[0]||(g[0]=w=>c.value.mail_driver=w),I],options:e(v).mail_drivers,"can-deselect":!1,"content-loading":o.isFetchingInitialData,invalid:e(u).smtpConfig.mail_driver.$error},null,8,["modelValue","options","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),a(C,{label:n.$t("wizard.mail.host"),"content-loading":o.isFetchingInitialData,error:e(u).smtpConfig.mail_host.$error&&e(u).smtpConfig.mail_host.$errors[0].$message,required:""},{default:d(()=>[a(m,{modelValue:c.value.mail_host,"onUpdate:modelValue":g[1]||(g[1]=w=>c.value.mail_host=w),modelModifiers:{trim:!0},invalid:e(u).smtpConfig.mail_host.$error,"content-loading":o.isFetchingInitialData,type:"text",name:"mail_host",onInput:g[2]||(g[2]=w=>e(u).smtpConfig.mail_host.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"])]),B("div",ta,[a(C,{label:n.$t("wizard.mail.username"),"content-loading":o.isFetchingInitialData},{default:d(()=>[a(m,{modelValue:c.value.mail_username,"onUpdate:modelValue":g[3]||(g[3]=w=>c.value.mail_username=w),modelModifiers:{trim:!0},"content-loading":o.isFetchingInitialData,type:"text",name:"db_name"},null,8,["modelValue","content-loading"])]),_:1},8,["label","content-loading"]),a(C,{label:n.$t("wizard.mail.password"),"content-loading":o.isFetchingInitialData},{default:d(()=>[a(m,{modelValue:c.value.mail_password,"onUpdate:modelValue":g[6]||(g[6]=w=>c.value.mail_password=w),modelModifiers:{trim:!0},type:p.value,"content-loading":o.isFetchingInitialData,autocomplete:"off","data-lpignore":"true",name:"password"},{right:d(()=>[e(i)?(q(),M(_,{key:0,name:"EyeOffIcon",class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:g[4]||(g[4]=w=>K(i)?i.value=!e(i):i=!e(i))})):(q(),M(_,{key:1,name:"EyeIcon",class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:g[5]||(g[5]=w=>K(i)?i.value=!e(i):i=!e(i))}))]),_:1},8,["modelValue","type","content-loading"])]),_:1},8,["label","content-loading"])]),B("div",na,[a(C,{label:n.$t("wizard.mail.port"),error:e(u).smtpConfig.mail_port.$error&&e(u).smtpConfig.mail_port.$errors[0].$message,"content-loading":o.isFetchingInitialData,required:""},{default:d(()=>[a(m,{modelValue:c.value.mail_port,"onUpdate:modelValue":g[7]||(g[7]=w=>c.value.mail_port=w),modelModifiers:{trim:!0},invalid:e(u).smtpConfig.mail_port.$error,"content-loading":o.isFetchingInitialData,type:"text",name:"mail_port",onInput:g[8]||(g[8]=w=>e(u).smtpConfig.mail_port.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","error","content-loading"]),a(C,{label:n.$t("wizard.mail.encryption"),error:e(u).smtpConfig.mail_encryption.$error&&e(u).smtpConfig.mail_encryption.$errors[0].$message,"content-loading":o.isFetchingInitialData,required:""},{default:d(()=>[a($,{modelValue:c.value.mail_encryption,"onUpdate:modelValue":g[9]||(g[9]=w=>c.value.mail_encryption=w),modelModifiers:{trim:!0},options:s,"can-deselect":!1,invalid:e(u).smtpConfig.mail_encryption.$error,"content-loading":o.isFetchingInitialData,onInput:g[10]||(g[10]=w=>e(u).smtpConfig.mail_encryption.$touch())},null,8,["modelValue","options","invalid","content-loading"])]),_:1},8,["label","error","content-loading"])]),B("div",ia,[a(C,{label:n.$t("wizard.mail.from_mail"),error:e(u).smtpConfig.from_mail.$error&&e(u).smtpConfig.from_mail.$errors[0].$message,"content-loading":o.isFetchingInitialData,required:""},{default:d(()=>[a(m,{modelValue:c.value.from_mail,"onUpdate:modelValue":g[11]||(g[11]=w=>c.value.from_mail=w),modelModifiers:{trim:!0},invalid:e(u).smtpConfig.from_mail.$error,"content-loading":o.isFetchingInitialData,type:"text",name:"from_mail",onInput:g[12]||(g[12]=w=>e(u).smtpConfig.from_mail.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","error","content-loading"]),a(C,{label:n.$t("wizard.mail.from_name"),error:e(u).smtpConfig.from_name.$error&&e(u).smtpConfig.from_name.$errors[0].$message,"content-loading":o.isFetchingInitialData,required:""},{default:d(()=>[a(m,{modelValue:c.value.from_name,"onUpdate:modelValue":g[13]||(g[13]=w=>c.value.from_name=w),modelModifiers:{trim:!0},invalid:e(u).smtpConfig.from_name.$error,"content-loading":o.isFetchingInitialData,type:"text",name:"from_name",onInput:g[14]||(g[14]=w=>e(u).smtpConfig.from_name.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","error","content-loading"])]),a(f,{loading:o.isSaving,disabled:o.isSaving,"content-loading":o.isFetchingInitialData,class:"mt-4"},{left:d(w=>[o.isSaving?E("",!0):(q(),M(_,{key:0,name:"SaveIcon",class:O(w.class)},null,8,["class"]))]),default:d(()=>[N(" "+P(n.$t("general.save")),1)]),_:1},8,["loading","disabled","content-loading"])],32)}}},la={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 lg:mb-6 md:mb-6"},ra={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 lg:mb-6 md:mb-6"},sa={class:"grid grid-cols-1 gap-4 mb-6 md:grid-cols-2"},da={__name:"MailgunMailDriver",props:{isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,require:!0,default:!1}},emits:["submit-data","on-change-driver"],setup(o,{emit:S}){const D=S;let i=z(!1);const s=ee(),{t}=G.useI18n(),v=k(()=>s.mailgunConfig),c=k(()=>i.value?"text":"password");v.value.mail_driver="mailgun";const p=k(()=>({mailgunConfig:{mail_driver:{required:h.withMessage(t("validation.required"),V)},mail_mailgun_domain:{required:h.withMessage(t("validation.required"),V)},mail_mailgun_endpoint:{required:h.withMessage(t("validation.required"),V)},mail_mailgun_secret:{required:h.withMessage(t("validation.required"),V)},from_mail:{required:h.withMessage(t("validation.required"),V),email:X},from_name:{required:h.withMessage(t("validation.required"),V)}}})),r=R(p,k(()=>s));function u(){return r.value.$touch(),r.value.$invalid||D("submit-data",s.mailgunConfig),!1}function l(){r.value.mailgunConfig.mail_driver.$touch(),D("on-change-driver",s.mailgunConfig.mail_driver)}return(I,n)=>{const g=b("BaseMultiselect"),$=b("BaseInputGroup"),C=b("BaseInput"),m=b("BaseIcon"),_=b("BaseButton");return q(),U("form",{onSubmit:T(u,["prevent"])},[B("div",la,[a($,{label:I.$t("wizard.mail.driver"),"content-loading":o.isFetchingInitialData,error:e(r).mailgunConfig.mail_driver.$error&&e(r).mailgunConfig.mail_driver.$errors[0].$message,required:""},{default:d(()=>[a(g,{modelValue:v.value.mail_driver,"onUpdate:modelValue":[n[0]||(n[0]=f=>v.value.mail_driver=f),l],options:e(s).mail_drivers,"can-deselect":!1,invalid:e(r).mailgunConfig.mail_driver.$error,"content-loading":o.isFetchingInitialData},null,8,["modelValue","options","invalid","content-loading"])]),_:1},8,["label","content-loading","error"]),a($,{label:I.$t("wizard.mail.mailgun_domain"),"content-loading":o.isFetchingInitialData,error:e(r).mailgunConfig.mail_mailgun_domain.$error&&e(r).mailgunConfig.mail_mailgun_domain.$errors[0].$message,required:""},{default:d(()=>[a(C,{modelValue:v.value.mail_mailgun_domain,"onUpdate:modelValue":n[1]||(n[1]=f=>v.value.mail_mailgun_domain=f),modelModifiers:{trim:!0},invalid:e(r).mailgunConfig.mail_mailgun_domain.$error,"content-loading":o.isFetchingInitialData,type:"text",name:"mailgun_domain",onInput:n[2]||(n[2]=f=>e(r).mailgunConfig.mail_mailgun_domain.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"])]),B("div",ra,[a($,{label:I.$t("wizard.mail.mailgun_secret"),"content-loading":o.isFetchingInitialData,error:e(r).mailgunConfig.mail_mailgun_secret.$error&&e(r).mailgunConfig.mail_mailgun_secret.$errors[0].$message,required:""},{default:d(()=>[a(C,{modelValue:v.value.mail_mailgun_secret,"onUpdate:modelValue":n[5]||(n[5]=f=>v.value.mail_mailgun_secret=f),modelModifiers:{trim:!0},invalid:e(r).mailgunConfig.mail_mailgun_secret.$error,type:c.value,"content-loading":o.isFetchingInitialData,name:"mailgun_secret",autocomplete:"off","data-lpignore":"true",onInput:n[6]||(n[6]=f=>e(r).mailgunConfig.mail_mailgun_secret.$touch())},{right:d(()=>[e(i)?(q(),M(m,{key:0,name:"EyeOffIcon",class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:n[3]||(n[3]=f=>K(i)?i.value=!e(i):i=!e(i))})):(q(),M(m,{key:1,name:"EyeIcon",class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:n[4]||(n[4]=f=>K(i)?i.value=!e(i):i=!e(i))}))]),_:1},8,["modelValue","invalid","type","content-loading"])]),_:1},8,["label","content-loading","error"]),a($,{label:I.$t("wizard.mail.mailgun_endpoint"),"content-loading":o.isFetchingInitialData,error:e(r).mailgunConfig.mail_mailgun_endpoint.$error&&e(r).mailgunConfig.mail_mailgun_endpoint.$errors[0].$message,required:""},{default:d(()=>[a(C,{modelValue:v.value.mail_mailgun_endpoint,"onUpdate:modelValue":n[7]||(n[7]=f=>v.value.mail_mailgun_endpoint=f),modelModifiers:{trim:!0},invalid:e(r).mailgunConfig.mail_mailgun_endpoint.$error,"content-loading":o.isFetchingInitialData,type:"text",name:"mailgun_endpoint",onInput:n[8]||(n[8]=f=>e(r).mailgunConfig.mail_mailgun_endpoint.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"])]),B("div",sa,[a($,{label:I.$t("wizard.mail.from_mail"),"content-loading":o.isFetchingInitialData,error:e(r).mailgunConfig.from_mail.$error&&e(r).mailgunConfig.from_mail.$errors[0].$message,required:""},{default:d(()=>[a(C,{modelValue:v.value.from_mail,"onUpdate:modelValue":n[9]||(n[9]=f=>v.value.from_mail=f),modelModifiers:{trim:!0},name:"from_mail",type:"text",invalid:e(r).mailgunConfig.from_mail.$error,"content-loading":o.isFetchingInitialData,onInput:n[10]||(n[10]=f=>e(r).mailgunConfig.from_mail.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"]),a($,{label:I.$t("wizard.mail.from_name"),"content-loading":o.isFetchingInitialData,error:e(r).mailgunConfig.from_name.$error&&e(r).mailgunConfig.from_name.$errors[0].$message,required:""},{default:d(()=>[a(C,{modelValue:v.value.from_name,"onUpdate:modelValue":n[11]||(n[11]=f=>v.value.from_name=f),modelModifiers:{trim:!0},invalid:e(r).mailgunConfig.from_name.$error,"content-loading":o.isFetchingInitialData,type:"text",name:"from_name",onInput:n[12]||(n[12]=f=>e(r).mailgunConfig.from_name.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"])]),a(_,{loading:I.loading,disabled:o.isSaving,"content-loading":o.isFetchingInitialData,class:"mt-4"},{left:d(f=>[o.isSaving?E("",!0):(q(),M(m,{key:0,name:"SaveIcon",class:O(f.class)},null,8,["class"]))]),default:d(()=>[N(" "+P(I.$t("general.save")),1)]),_:1},8,["loading","disabled","content-loading"])],32)}}},ua={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},ma={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},ca={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},ga={class:"grid grid-cols-1 gap-4 mb-6 md:grid-cols-2"},va={__name:"SesMailDriver",props:{isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,require:!0,default:!1}},emits:["submit-data","on-change-driver"],setup(o,{emit:S}){const D=S,{t:i}=G.useI18n(),s=j(["tls","ssl","starttls"]);let t=z(!1);const v=ee(),c=k(()=>v.sesConfig);c.value.mail_driver="ses";const p=k(()=>({sesConfig:{mail_driver:{required:h.withMessage(i("validation.required"),V)},mail_host:{required:h.withMessage(i("validation.required"),V)},mail_port:{required:h.withMessage(i("validation.required"),V),numeric:ne},mail_ses_key:{required:h.withMessage(i("validation.required"),V)},mail_ses_secret:{required:h.withMessage(i("validation.required"),V)},mail_encryption:{required:h.withMessage(i("validation.required"),V)},from_mail:{required:h.withMessage(i("validation.required"),V),email:h.withMessage(i("validation.email_incorrect"),X)},from_name:{required:h.withMessage(i("validation.required"),V)}}})),r=R(p,k(()=>v));async function u(){return r.value.$touch(),r.value.$invalid||D("submit-data",v.sesConfig),!1}function l(){r.value.sesConfig.mail_driver.$touch(),D("on-change-driver",v.sesConfig.mail_driver)}return(I,n)=>{const g=b("BaseMultiselect"),$=b("BaseInputGroup"),C=b("BaseInput"),m=b("BaseIcon"),_=b("BaseButton");return q(),U("form",{onSubmit:T(u,["prevent"])},[B("div",ua,[a($,{label:I.$t("wizard.mail.driver"),"content-loading":o.isFetchingInitialData,error:e(r).sesConfig.mail_driver.$error&&e(r).sesConfig.mail_driver.$errors[0].$message,required:""},{default:d(()=>[a(g,{modelValue:c.value.mail_driver,"onUpdate:modelValue":[n[0]||(n[0]=f=>c.value.mail_driver=f),l],options:e(v).mail_drivers,"can-deselect":!1,"content-loading":o.isFetchingInitialData,invalid:e(r).sesConfig.mail_driver.$error},null,8,["modelValue","options","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),a($,{label:I.$t("wizard.mail.host"),"content-loading":o.isFetchingInitialData,error:e(r).sesConfig.mail_host.$error&&e(r).sesConfig.mail_host.$errors[0].$message,required:""},{default:d(()=>[a(C,{modelValue:c.value.mail_host,"onUpdate:modelValue":n[1]||(n[1]=f=>c.value.mail_host=f),modelModifiers:{trim:!0},invalid:e(r).sesConfig.mail_host.$error,"content-loading":o.isFetchingInitialData,type:"text",name:"mail_host",onInput:n[2]||(n[2]=f=>e(r).sesConfig.mail_host.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"])]),B("div",ma,[a($,{label:I.$t("wizard.mail.port"),"content-loading":o.isFetchingInitialData,error:e(r).sesConfig.mail_port.$error&&e(r).sesConfig.mail_port.$errors[0].$message,required:""},{default:d(()=>[a(C,{modelValue:c.value.mail_port,"onUpdate:modelValue":n[3]||(n[3]=f=>c.value.mail_port=f),modelModifiers:{trim:!0},invalid:e(r).sesConfig.mail_port.$error,"content-loading":o.isFetchingInitialData,type:"text",name:"mail_port",onInput:n[4]||(n[4]=f=>e(r).sesConfig.mail_port.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"]),a($,{label:I.$t("wizard.mail.encryption"),"content-loading":o.isFetchingInitialData,error:e(r).sesConfig.mail_encryption.$error&&e(r).sesConfig.mail_encryption.$errors[0].$message,required:""},{default:d(()=>[a(g,{modelValue:c.value.mail_encryption,"onUpdate:modelValue":n[5]||(n[5]=f=>c.value.mail_encryption=f),modelModifiers:{trim:!0},invalid:e(r).sesConfig.mail_encryption.$error,options:s,"content-loading":o.isFetchingInitialData,onInput:n[6]||(n[6]=f=>e(r).sesConfig.mail_encryption.$touch())},null,8,["modelValue","invalid","options","content-loading"])]),_:1},8,["label","content-loading","error"])]),B("div",ca,[a($,{label:I.$t("wizard.mail.from_mail"),"content-loading":o.isFetchingInitialData,error:e(r).sesConfig.from_mail.$error&&e(r).sesConfig.from_mail.$errors[0].$message,required:""},{default:d(()=>[a(C,{modelValue:c.value.from_mail,"onUpdate:modelValue":n[7]||(n[7]=f=>c.value.from_mail=f),modelModifiers:{trim:!0},invalid:e(r).sesConfig.from_mail.$error,"content-loading":o.isFetchingInitialData,type:"text",name:"from_mail",onInput:n[8]||(n[8]=f=>e(r).sesConfig.from_mail.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"]),a($,{label:I.$t("wizard.mail.from_name"),"content-loading":o.isFetchingInitialData,error:e(r).sesConfig.from_name.$error&&e(r).sesConfig.from_name.$errors[0].$message,required:""},{default:d(()=>[a(C,{modelValue:c.value.from_name,"onUpdate:modelValue":n[9]||(n[9]=f=>c.value.from_name=f),modelModifiers:{trim:!0},invalid:e(r).sesConfig.from_name.$error,"content-loading":o.isFetchingInitialData,type:"text",name:"name",onInput:n[10]||(n[10]=f=>e(r).sesConfig.from_name.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"])]),B("div",ga,[a($,{label:I.$t("wizard.mail.ses_key"),"content-loading":o.isFetchingInitialData,error:e(r).sesConfig.mail_ses_key.$error&&e(r).sesConfig.mail_ses_key.$errors[0].$message,required:""},{default:d(()=>[a(C,{modelValue:c.value.mail_ses_key,"onUpdate:modelValue":n[11]||(n[11]=f=>c.value.mail_ses_key=f),modelModifiers:{trim:!0},invalid:e(r).sesConfig.mail_ses_key.$error,"content-loading":o.isFetchingInitialData,type:"text",name:"mail_ses_key",onInput:n[12]||(n[12]=f=>e(r).sesConfig.mail_ses_key.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"]),a($,{label:I.$t("wizard.mail.ses_secret"),"content-loading":o.isFetchingInitialData,error:e(r).sesConfig.mail_ses_secret.$error&&e(r).sesConfig.mail_ses_secret.$errors[0].$message,required:""},{default:d(()=>[a(C,{modelValue:c.value.mail_ses_secret,"onUpdate:modelValue":n[15]||(n[15]=f=>c.value.mail_ses_secret=f),modelModifiers:{trim:!0},invalid:e(r).sesConfig.mail_ses_secret.$error,type:I.getInputType,"content-loading":o.isFetchingInitialData,name:"mail_ses_secret",autocomplete:"off","data-lpignore":"true",onInput:n[16]||(n[16]=f=>e(r).sesConfig.mail_ses_secret.$touch())},{right:d(()=>[e(t)?(q(),M(m,{key:0,name:"EyeOffIcon",class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:n[13]||(n[13]=f=>K(t)?t.value=!e(t):t=!e(t))})):(q(),M(m,{key:1,name:"EyeIcon",class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:n[14]||(n[14]=f=>K(t)?t.value=!e(t):t=!e(t))}))]),_:1},8,["modelValue","invalid","type","content-loading"])]),_:1},8,["label","content-loading","error"])]),a(_,{loading:o.isSaving,disabled:o.isSaving,"content-loading":o.isFetchingInitialData,class:"mt-4"},{left:d(f=>[o.isSaving?E("",!0):(q(),M(m,{key:0,name:"SaveIcon",class:O(f.class)},null,8,["class"]))]),default:d(()=>[N(" "+P(I.$t("general.save")),1)]),_:1},8,["loading","disabled","content-loading"])],32)}}},pa={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},fa={class:"grid grid-cols-1 gap-4 mb-6 md:grid-cols-2"},ce={__name:"BasicMailDriver",props:{isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,require:!0,default:!1}},emits:["submit-data","on-change-driver"],setup(o,{emit:S}){const D=S,{t:i}=G.useI18n(),s=ee(),t=k(()=>s.basicMailConfig);k(()=>s.mail_drivers),t.value.mail_driver="mail";const v=k(()=>({basicMailConfig:{mail_driver:{required:h.withMessage(i("validation.required"),V)},from_mail:{required:h.withMessage(i("validation.required"),V),email:h.withMessage(i("validation.email_incorrect"),X)},from_name:{required:h.withMessage(i("validation.required"),V)}}})),c=R(v,k(()=>s));function p(){return c.value.$touch(),c.value.$invalid||D("submit-data",s.basicMailConfig),!1}function r(){var u;c.value.basicMailConfig.mail_driver.$touch(),D("on-change-driver",(u=s==null?void 0:s.basicMailConfig)==null?void 0:u.mail_driver)}return(u,l)=>{const I=b("BaseMultiselect"),n=b("BaseInputGroup"),g=b("BaseInput"),$=b("BaseIcon"),C=b("BaseButton");return q(),U("form",{onSubmit:T(p,["prevent"])},[B("div",pa,[a(n,{label:u.$t("wizard.mail.driver"),"content-loading":o.isFetchingInitialData,error:e(c).basicMailConfig.mail_driver.$error&&e(c).basicMailConfig.mail_driver.$errors[0].$message,required:""},{default:d(()=>[a(I,{modelValue:t.value.mail_driver,"onUpdate:modelValue":[l[0]||(l[0]=m=>t.value.mail_driver=m),r],invalid:e(c).basicMailConfig.mail_driver.$error,options:e(s).mail_drivers,"can-deselect":!1,"content-loading":o.isFetchingInitialData},null,8,["modelValue","invalid","options","content-loading"])]),_:1},8,["label","content-loading","error"])]),B("div",fa,[a(n,{label:u.$t("wizard.mail.from_name"),"content-loading":o.isFetchingInitialData,error:e(c).basicMailConfig.from_name.$error&&e(c).basicMailConfig.from_name.$errors[0].$message,required:""},{default:d(()=>[a(g,{modelValue:t.value.from_name,"onUpdate:modelValue":l[1]||(l[1]=m=>t.value.from_name=m),modelModifiers:{trim:!0},invalid:e(c).basicMailConfig.from_name.$error,"content-loading":o.isFetchingInitialData,type:"text",name:"name",onInput:l[2]||(l[2]=m=>e(c).basicMailConfig.from_name.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"]),a(n,{label:u.$t("wizard.mail.from_mail"),"content-loading":o.isFetchingInitialData,error:e(c).basicMailConfig.from_mail.$error&&e(c).basicMailConfig.from_mail.$errors[0].$message,required:""},{default:d(()=>[a(g,{modelValue:t.value.from_mail,"onUpdate:modelValue":l[3]||(l[3]=m=>t.value.from_mail=m),modelModifiers:{trim:!0},invalid:e(c).basicMailConfig.from_mail.$error,"content-loading":o.isFetchingInitialData,type:"text",onInput:l[4]||(l[4]=m=>e(c).basicMailConfig.from_mail.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"])]),a(C,{loading:o.isSaving,disabled:o.isSaving,"content-loading":o.isFetchingInitialData,class:"mt-4"},{left:d(m=>[o.isSaving?E("",!0):(q(),M($,{key:0,name:"SaveIcon",class:O(m.class)},null,8,["class"]))]),default:d(()=>[N(" "+P(u.$t("general.save")),1)]),_:1},8,["loading","disabled","content-loading"])],32)}}},_a={components:{Smtp:oa,Mailgun:da,Ses:va,sendmail:ce,Mail:ce},emits:["next"],setup(o,{emit:S}){const D=z(!1),i=z(!1),s=ee();s.mail_driver="mail",v();function t(p){s.mail_driver=p}async function v(){i.value=!0,await s.fetchMailDrivers(),i.value=!1}async function c(p){D.value=!0;let r=await s.updateMailConfig(p);D.value=!1,r.data.success&&await S("next",5)}return{mailDriverStore:s,isSaving:D,isFetchingInitialData:i,changeDriver:t,next:c}}};function ba(o,S,D,i,s,t){const v=b("BaseWizardStep");return q(),M(v,{title:o.$t("wizard.mail.mail_config"),description:o.$t("wizard.mail.mail_config_desc")},{default:d(()=>[B("form",{action:"",onSubmit:S[1]||(S[1]=T((...c)=>i.next&&i.next(...c),["prevent"]))},[(q(),M(ue(i.mailDriverStore.mail_driver),{"config-data":i.mailDriverStore.mailConfigData,"is-saving":i.isSaving,"is-fetching-initial-data":i.isFetchingInitialData,onOnChangeDriver:S[0]||(S[0]=c=>i.changeDriver(c)),onSubmitData:i.next},null,40,["config-data","is-saving","is-fetching-initial-data","onSubmitData"]))],32)]),_:1},8,["title","description"])}const $a=se(_a,[["render",ba]]),wa={class:"grid grid-cols-1 mb-4 md:grid-cols-2 md:mb-6"},ya={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},ha={class:"grid grid-cols-1 gap-4 mb-6 md:grid-cols-2"},Ia={__name:"Step6AccountSettings",emits:["next"],setup(o,{emit:S}){const D=S;let i=z(!1);const s=z(!1),t=z(!1);let v=z(""),c=z(null);const p=ve(),r=ae(),{t:u}=G.useI18n(),l=k(()=>p.userForm),I=k(()=>({userForm:{name:{required:h.withMessage(u("validation.required"),V)},email:{required:h.withMessage(u("validation.required"),V),email:h.withMessage(u("validation.email_incorrect"),X)},password:{required:h.withMessage(u("validation.required"),V),minLength:h.withMessage(u("validation.password_min_length",{count:8}),be(8))},confirm_password:{required:h.withMessage(u("validation.required"),$e(p.userForm.password)),sameAsPassword:h.withMessage(u("validation.password_incorrect"),we(p.userForm.password))}}})),n=R(I,k(()=>p));function g(m,_){c.value=_}function $(){c.value=null}async function C(){if(n.value.userForm.$touch(),n.value.userForm.$invalid)return!0;i.value=!0;let m=await p.updateCurrentUser(l.value);if(i.value=!1,m.data.data){if(c.value){let f=new FormData;f.append("admin_avatar",c.value),await p.uploadAvatar(f)}const _=m.data.data.companies[0];await r.setSelectedCompany(_),D("next",6)}}return(m,_)=>{const f=b("BaseFileUploader"),w=b("BaseInputGroup"),y=b("BaseInput"),L=b("EyeOffIcon"),Z=b("EyeIcon"),J=b("BaseIcon"),H=b("BaseButton"),x=b("BaseWizardStep");return q(),M(x,{title:m.$t("wizard.account_info"),description:m.$t("wizard.account_info_desc")},{default:d(()=>[B("form",{action:"",onSubmit:T(C,["prevent"])},[B("div",wa,[a(w,{label:m.$t("settings.account_settings.profile_picture")},{default:d(()=>[a(f,{avatar:!0,"preview-image":e(v),onChange:g,onRemove:$},null,8,["preview-image"])]),_:1},8,["label"])]),B("div",ya,[a(w,{label:m.$t("wizard.name"),error:e(n).userForm.name.$error&&e(n).userForm.name.$errors[0].$message,required:""},{default:d(()=>[a(y,{modelValue:l.value.name,"onUpdate:modelValue":_[0]||(_[0]=F=>l.value.name=F),modelModifiers:{trim:!0},invalid:e(n).userForm.name.$error,type:"text",name:"name",onInput:_[1]||(_[1]=F=>e(n).userForm.name.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),a(w,{label:m.$t("wizard.email"),error:e(n).userForm.email.$error&&e(n).userForm.email.$errors[0].$message,required:""},{default:d(()=>[a(y,{modelValue:l.value.email,"onUpdate:modelValue":_[2]||(_[2]=F=>l.value.email=F),modelModifiers:{trim:!0},invalid:e(n).userForm.email.$error,type:"text",name:"email",onInput:_[3]||(_[3]=F=>e(n).userForm.email.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"])]),B("div",ha,[a(w,{label:m.$t("wizard.password"),error:e(n).userForm.password.$error&&e(n).userForm.password.$errors[0].$message,required:""},{default:d(()=>[a(y,{modelValue:l.value.password,"onUpdate:modelValue":_[6]||(_[6]=F=>l.value.password=F),modelModifiers:{trim:!0},invalid:e(n).userForm.password.$error,type:s.value?"text":"password",name:"password",onInput:_[7]||(_[7]=F=>e(n).userForm.password.$touch())},{right:d(()=>[s.value?(q(),M(L,{key:0,class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:_[4]||(_[4]=F=>s.value=!s.value)})):(q(),M(Z,{key:1,class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:_[5]||(_[5]=F=>s.value=!s.value)}))]),_:1},8,["modelValue","invalid","type"])]),_:1},8,["label","error"]),a(w,{label:m.$t("wizard.confirm_password"),error:e(n).userForm.confirm_password.$error&&e(n).userForm.confirm_password.$errors[0].$message,required:""},{default:d(()=>[a(y,{modelValue:l.value.confirm_password,"onUpdate:modelValue":_[10]||(_[10]=F=>l.value.confirm_password=F),modelModifiers:{trim:!0},invalid:e(n).userForm.confirm_password.$error,type:t.value?"text":"password",name:"confirm_password",onInput:_[11]||(_[11]=F=>e(n).userForm.confirm_password.$touch())},{right:d(()=>[t.value?(q(),M(J,{key:0,name:"EyeOffIcon",class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:_[8]||(_[8]=F=>t.value=!t.value)})):(q(),M(J,{key:1,name:"EyeIcon",class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:_[9]||(_[9]=F=>t.value=!t.value)}))]),_:1},8,["modelValue","invalid","type"])]),_:1},8,["label","error"])]),a(H,{loading:e(i),disabled:e(i),class:"mt-4"},{left:d(F=>[e(i)?E("",!0):(q(),M(J,{key:0,name:"SaveIcon",class:O(F.class)},null,8,["class"]))]),default:d(()=>[N(" "+P(m.$t("wizard.save_cont")),1)]),_:1},8,["loading","disabled"])],32)]),_:1},8,["title","description"])}}},qa={class:"grid grid-cols-1 mb-4 md:grid-cols-2 md:mb-6"},Ca={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},Ba={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},Va={class:"grid grid-cols-1 gap-4 mb-6 md:grid-cols-2"},Da={__name:"Step7CompanyInfo",emits:["next"],setup(o,{emit:S}){const D=S;let i=z(!1),s=z(!1);const{t}=G.useI18n();let v=z(null),c=z(null),p=z(null);const r=j({name:null,tax_id:null,vat_id:null,address:{address_street_1:"",address_street_2:"",website:"",country_id:null,state:"",city:"",phone:"",zip:""}}),u=ae(),l=pe();Q(async()=>{var m;i.value=!0,await l.fetchCountries(),i.value=!1,r.address.country_id=(m=l.countries.find(_=>_.code=="US"))==null?void 0:m.id});const I={companyForm:{name:{required:h.withMessage(t("validation.required"),V)},address:{country_id:{required:h.withMessage(t("validation.required"),V)},address_street_1:{maxLength:h.withMessage(t("validation.address_maxlength",{count:255}),me(255))},address_street_2:{maxLength:h.withMessage(t("validation.address_maxlength",{count:255}),me(255))}}}},n=R(I,{companyForm:r});function g(m,_,f,w){p.value=w.name,c.value=_}function $(){c.value=null}async function C(){if(n.value.companyForm.$touch(),n.value.$invalid)return!0;if(s.value=!0,u.updateCompany(r)){if(c.value){let _=new FormData;_.append("company_logo",JSON.stringify({name:p.value,data:c.value})),await u.updateCompanyLogo(_)}s.value=!1,D("next",7)}}return(m,_)=>{const f=b("BaseFileUploader"),w=b("BaseInputGroup"),y=b("BaseInput"),L=b("BaseMultiselect"),Z=b("BaseTextarea"),J=b("BaseIcon"),H=b("BaseButton"),x=b("BaseWizardStep");return q(),M(x,{title:m.$t("wizard.company_info"),description:m.$t("wizard.company_info_desc"),"step-container":"bg-white border border-gray-200 border-solid mb-8 md:w-full p-8 rounded w-full"},{default:d(()=>[B("form",{action:"",onSubmit:T(C,["prevent"])},[B("div",qa,[a(w,{label:m.$t("settings.company_info.company_logo")},{default:d(()=>[a(f,{base64:"","preview-image":e(v),onChange:g,onRemove:$},null,8,["preview-image"])]),_:1},8,["label"])]),B("div",Ca,[a(w,{label:m.$t("wizard.company_name"),error:e(n).companyForm.name.$error&&e(n).companyForm.name.$errors[0].$message,required:""},{default:d(()=>[a(y,{modelValue:r.name,"onUpdate:modelValue":_[0]||(_[0]=F=>r.name=F),modelModifiers:{trim:!0},invalid:e(n).companyForm.name.$error,type:"text",name:"name",onInput:_[1]||(_[1]=F=>e(n).companyForm.name.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),a(w,{label:m.$t("wizard.country"),error:e(n).companyForm.address.country_id.$error&&e(n).companyForm.address.country_id.$errors[0].$message,"content-loading":e(i),required:""},{default:d(()=>[a(L,{modelValue:r.address.country_id,"onUpdate:modelValue":_[2]||(_[2]=F=>r.address.country_id=F),label:"name",invalid:e(n).companyForm.address.country_id.$error,options:e(l).countries,"value-prop":"id","can-deselect":!1,"can-clear":!1,"content-loading":e(i),placeholder:m.$t("general.select_country"),searchable:"","track-by":"name"},null,8,["modelValue","invalid","options","content-loading","placeholder"])]),_:1},8,["label","error","content-loading"])]),B("div",Ba,[a(w,{label:m.$t("wizard.state")},{default:d(()=>[a(y,{modelValue:r.address.state,"onUpdate:modelValue":_[3]||(_[3]=F=>r.address.state=F),name:"state",type:"text"},null,8,["modelValue"])]),_:1},8,["label"]),a(w,{label:m.$t("wizard.city")},{default:d(()=>[a(y,{modelValue:r.address.city,"onUpdate:modelValue":_[4]||(_[4]=F=>r.address.city=F),name:"city",type:"text"},null,8,["modelValue"])]),_:1},8,["label"])]),B("div",Va,[B("div",null,[a(w,{label:m.$t("wizard.address"),error:e(n).companyForm.address.address_street_1.$error&&e(n).companyForm.address.address_street_1.$errors[0].$message},{default:d(()=>[a(Z,{modelValue:r.address.address_street_1,"onUpdate:modelValue":_[5]||(_[5]=F=>r.address.address_street_1=F),modelModifiers:{trim:!0},invalid:e(n).companyForm.address.address_street_1.$error,placeholder:m.$t("general.street_1"),name:"billing_street1",rows:"2",onInput:_[6]||(_[6]=F=>e(n).companyForm.address.address_street_1.$touch())},null,8,["modelValue","invalid","placeholder"])]),_:1},8,["label","error"]),a(w,{error:e(n).companyForm.address.address_street_2.$error&&e(n).companyForm.address.address_street_2.$errors[0].$message,class:"mt-1 lg:mt-2 md:mt-2"},{default:d(()=>[a(Z,{modelValue:r.address.address_street_2,"onUpdate:modelValue":_[7]||(_[7]=F=>r.address.address_street_2=F),invalid:e(n).companyForm.address.address_street_2.$error,placeholder:m.$t("general.street_2"),name:"billing_street2",rows:"2",onInput:_[8]||(_[8]=F=>e(n).companyForm.address.address_street_2.$touch())},null,8,["modelValue","invalid","placeholder"])]),_:1},8,["error"])]),B("div",null,[a(w,{label:m.$t("wizard.zip_code")},{default:d(()=>[a(y,{modelValue:r.address.zip,"onUpdate:modelValue":_[9]||(_[9]=F=>r.address.zip=F),modelModifiers:{trim:!0},type:"text",name:"zip"},null,8,["modelValue"])]),_:1},8,["label"]),a(w,{label:m.$t("wizard.phone"),class:"mt-4"},{default:d(()=>[a(y,{modelValue:r.address.phone,"onUpdate:modelValue":_[10]||(_[10]=F=>r.address.phone=F),modelModifiers:{trim:!0},type:"text",name:"phone"},null,8,["modelValue"])]),_:1},8,["label"])]),a(w,{label:m.$t("settings.company_info.tax_id")},{default:d(()=>[a(y,{modelValue:r.tax_id,"onUpdate:modelValue":_[11]||(_[11]=F=>r.tax_id=F),modelModifiers:{trim:!0},type:"text",name:"tax_id"},null,8,["modelValue"])]),_:1},8,["label"]),a(w,{label:m.$t("settings.company_info.vat_id"),class:"mt-4"},{default:d(()=>[a(y,{modelValue:r.vat_id,"onUpdate:modelValue":_[12]||(_[12]=F=>r.vat_id=F),modelModifiers:{trim:!0},type:"text",name:"vat_id"},null,8,["modelValue"])]),_:1},8,["label"])]),a(H,{loading:e(s),disabled:e(s),class:"mt-4"},{left:d(F=>[e(s)?E("",!0):(q(),M(J,{key:0,name:"SaveIcon",class:O(F.class)},null,8,["class"]))]),default:d(()=>[N(" "+P(m.$t("wizard.save_cont")),1)]),_:1},8,["loading","disabled"])],32)]),_:1},8,["title","description"])}}},Sa={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},Fa={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},Ma={class:"grid grid-cols-1 gap-4 mb-6 md:grid-cols-2"},za={__name:"Step8CompanyPreferences",emits:["next"],setup(o,{emit:S}){const D=S,i=z(!1);let s=z(!1),t=j({currency:1,language:"en",carbon_date_format:"d M Y",time_zone:"UTC",fiscal_year:"1-12"});const{tm:v,t:c}=G.useI18n(),p=fe();s.value=!0,j([{title:v("settings.customization.invoices.allow"),value:"allow"},{title:v("settings.customization.invoices.disable_on_invoice_partial_paid"),value:"disable_on_invoice_partial_paid"},{title:v("settings.customization.invoices.disable_on_invoice_paid"),value:"disable_on_invoice_paid"},{title:v("settings.customization.invoices.disable_on_invoice_sent"),value:"disable_on_invoice_sent"}]);const r=ge(),u=pe(),l=ae(),I=ve(),n=de();let g={key:"fiscal_years"},$={key:"languages"};s.value=!0,Promise.all([u.fetchCurrencies(),u.fetchDateFormats(),u.fetchTimeZones(),u.fetchCountries(),u.fetchConfig(g),u.fetchConfig($)]).then(([f])=>{s.value=!1});const C=k(()=>({currentPreferences:{currency:{required:h.withMessage(c("validation.required"),V)},language:{required:h.withMessage(c("validation.required"),V)},carbon_date_format:{required:h.withMessage(c("validation.required"),V)},time_zone:{required:h.withMessage(c("validation.required"),V)},fiscal_year:{required:h.withMessage(c("validation.required"),V)}}})),m=R(C,{currentPreferences:t});async function _(){if(m.value.currentPreferences.$touch(),m.value.$invalid)return!0;r.openDialog({title:c("general.do_you_wish_to_continue"),message:c("wizard.currency_set_alert"),yesLabel:c("general.ok"),noLabel:c("general.cancel"),variant:"danger",size:"lg",hideNoButton:!1}).then(async f=>{if(f){let w={settings:{...t}};i.value=!0,delete w.settings.discount_per_item;let y=await l.updateCompanySettings({data:w});if(y.data){i.value=!1;let L={settings:{language:t.language}};(await I.updateUserSettings(L)).data&&(D("next","COMPLETED"),n.showNotification({type:"success",message:"Login Successful"}),p.push("/admin/dashboard")),ye.set("auth.token",y.data.token)}return!0}return i.value=!1,!0})}return(f,w)=>{const y=b("BaseMultiselect"),L=b("BaseInputGroup"),Z=b("BaseIcon"),J=b("BaseButton"),H=b("BaseWizardStep");return q(),M(H,{title:f.$t("wizard.preferences"),description:f.$t("wizard.preferences_desc"),"step-container":"bg-white border border-gray-200 border-solid mb-8 md:w-full p-8 rounded w-full"},{default:d(()=>[B("form",{action:"",onSubmit:T(_,["prevent"])},[B("div",null,[B("div",Sa,[a(L,{label:f.$t("wizard.currency"),error:e(m).currentPreferences.currency.$error&&e(m).currentPreferences.currency.$errors[0].$message,"content-loading":e(s),required:""},{default:d(()=>[a(y,{modelValue:e(t).currency,"onUpdate:modelValue":w[0]||(w[0]=x=>e(t).currency=x),"content-loading":e(s),options:e(u).currencies,label:"name","value-prop":"id",searchable:!0,"track-by":"name",placeholder:f.$t("settings.currencies.select_currency"),invalid:e(m).currentPreferences.currency.$error,class:"w-full"},null,8,["modelValue","content-loading","options","placeholder","invalid"])]),_:1},8,["label","error","content-loading"]),a(L,{label:f.$t("settings.preferences.default_language"),error:e(m).currentPreferences.language.$error&&e(m).currentPreferences.language.$errors[0].$message,"content-loading":e(s),required:""},{default:d(()=>[a(y,{modelValue:e(t).language,"onUpdate:modelValue":w[1]||(w[1]=x=>e(t).language=x),"content-loading":e(s),options:e(u).languages,label:"name","value-prop":"code",placeholder:f.$t("settings.preferences.select_language"),class:"w-full","track-by":"name",searchable:!0,invalid:e(m).currentPreferences.language.$error},null,8,["modelValue","content-loading","options","placeholder","invalid"])]),_:1},8,["label","error","content-loading"])]),B("div",Fa,[a(L,{label:f.$t("wizard.date_format"),error:e(m).currentPreferences.carbon_date_format.$error&&e(m).currentPreferences.carbon_date_format.$errors[0].$message,"content-loading":e(s),required:""},{default:d(()=>[a(y,{modelValue:e(t).carbon_date_format,"onUpdate:modelValue":w[2]||(w[2]=x=>e(t).carbon_date_format=x),"content-loading":e(s),options:e(u).dateFormats,label:"display_date","value-prop":"carbon_format_value",placeholder:f.$t("settings.preferences.select_date_format"),"track-by":"display_date",searchable:"",invalid:e(m).currentPreferences.carbon_date_format.$error,class:"w-full"},null,8,["modelValue","content-loading","options","placeholder","invalid"])]),_:1},8,["label","error","content-loading"]),a(L,{label:f.$t("wizard.time_zone"),error:e(m).currentPreferences.time_zone.$error&&e(m).currentPreferences.time_zone.$errors[0].$message,"content-loading":e(s),required:""},{default:d(()=>[a(y,{modelValue:e(t).time_zone,"onUpdate:modelValue":w[3]||(w[3]=x=>e(t).time_zone=x),"content-loading":e(s),options:e(u).timeZones,label:"key","value-prop":"value",placeholder:f.$t("settings.preferences.select_time_zone"),"track-by":"key",searchable:!0,invalid:e(m).currentPreferences.time_zone.$error},null,8,["modelValue","content-loading","options","placeholder","invalid"])]),_:1},8,["label","error","content-loading"])]),B("div",Ma,[a(L,{label:f.$t("wizard.fiscal_year"),error:e(m).currentPreferences.fiscal_year.$error&&e(m).currentPreferences.fiscal_year.$errors[0].$message,"content-loading":e(s),required:""},{default:d(()=>[a(y,{modelValue:e(t).fiscal_year,"onUpdate:modelValue":w[4]||(w[4]=x=>e(t).fiscal_year=x),"content-loading":e(s),options:e(u).fiscalYears,label:"key","value-prop":"value",placeholder:f.$t("settings.preferences.select_financial_year"),invalid:e(m).currentPreferences.fiscal_year.$error,"track-by":"key",searchable:!0,class:"w-full"},null,8,["modelValue","content-loading","options","placeholder","invalid"])]),_:1},8,["label","error","content-loading"])]),a(J,{loading:i.value,disabled:i.value,"content-loading":e(s),class:"mt-4"},{left:d(x=>[a(Z,{name:"SaveIcon",class:O(x.class)},null,8,["class"])]),default:d(()=>[N(" "+P(f.$t("wizard.save_cont")),1)]),_:1},8,["loading","disabled","content-loading"])])],32)]),_:1},8,["title","description"])}}},ka={components:{step_1:Ue,step_2:Le,step_3:Ke,step_4:ea,step_5:$a,step_6:Ia,step_7:Da,step_8:za},setup(){let o=z("step_1"),S=z(1);const D=fe(),i=Y();s();async function s(){let r=await i.fetchInstallationStep();if(r.data.profile_complete==="COMPLETED"){D.push("/admin/dashboard");return}let u=parseInt(r.data.profile_complete);u&&(S.value=u+1,o.value=`step_${u+1}`)}async function t(r){var l,I;let u={profile_complete:r};try{return await i.addInstallationStep(u),!0}catch(n){return((I=(l=n==null?void 0:n.response)==null?void 0:l.data)==null?void 0:I.message)==="The MAC is invalid."&&window.location.reload(),!1}}async function v(r){if(r&&!await t(r))return!1;S.value++,S.value<=8&&(o.value="step_"+S.value)}function c(r){}function p(){return new URL("/build/assets/logo-xCiSAN0z.png",import.meta.url)}return{stepComponent:o,currentStepNumber:S,onStepChange:v,saveStepProgress:t,onNavClick:c,getTickImage:p}}},Ua={class:"flex flex-col items-center justify-between w-full pt-10"},Pa=["src"];function Na(o,S,D,i,s,t){const v=b("BaseWizard");return q(),U("div",Ua,[B("img",{id:"logo-invoiceshelf",src:i.getTickImage(),alt:"InvoiceShelf Logo",class:"h-12 mb-5 md:mb-10"},null,8,Pa),a(v,{steps:7,"current-step":i.currentStepNumber,onClick:i.onNavClick},{default:d(()=>[(q(),M(ue(i.stepComponent),{onNext:i.onStepChange},null,40,["onNext"]))]),_:1},8,["current-step","onClick"])])}const Ga=se(ka,[["render",Na]]);export{Ga as default};
