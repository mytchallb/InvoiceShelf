import{ab as G,Z as J,r as T,o as i,c as s,b as g,J as f,p as P,t as c,K as y,a as w,N as k,O as C,H as N,f as F,k as L,z as K,Y as Z,a2 as A,l as p,w as Q,S as U,m as X,P as $}from"./main-q-Vi2wV1.js";function V(a,t){if(!t||a===null||typeof a!="object")return a;const[e,r]=t.split(/\.(.+)/);return V(a[e],r)}function ee(a,t){return t.reduce((e,r)=>(e[r]=a[r],e),{})}class te{constructor(t,e){this.data=t,this.columns=e}getValue(t){return V(this.data,t)}getColumn(t){return this.columns.find(e=>e.key===t)}getSortableValue(t){const e=this.getColumn(t).dataType;let r=this.getValue(t);if(r==null)return"";if(r instanceof String&&(r=r.toLowerCase()),e.startsWith("date")){const b=e.replace("date:","");return G(r,b).format("YYYYMMDDHHmmss")}return e==="numeric"?r:r.toString()}}class ae{constructor(t){const e=ee(t,["key","label","thClass","tdClass","sortBy","sortable","hidden","dataType"]);for(const r in e)this[r]=t[r];e.dataType||(this.dataType="string"),e.sortable===void 0&&(this.sortable=!0)}getFilterFieldName(){return this.filterOn||this.key}isSortable(){return this.sortable}getSortPredicate(t,e){const r=this.getSortFieldName(),l=e.find(u=>u.key===r).dataType;return l.startsWith("date")||l==="numeric"?(u,o)=>{const m=u.getSortableValue(r),x=o.getSortableValue(r);return t==="desc"?x<m?-1:1:m<x?-1:1}:(u,o)=>{const m=u.getSortableValue(r),x=o.getSortableValue(r);return t==="desc"?x.localeCompare(m):m.localeCompare(x)}}getSortFieldName(){return this.sortBy||this.key}}const ne={props:{pagination:{type:Object,default:()=>({})}},computed:{pages(){return this.pagination.totalPages===void 0?[]:this.pageLinks()},hasFirst(){return this.pagination.currentPage>=4||this.pagination.totalPages<10},hasLast(){return this.pagination.currentPage<=this.pagination.totalPages-3||this.pagination.totalPages<10},hasFirstEllipsis(){return this.pagination.currentPage>=4&&this.pagination.totalPages>=10},hasLastEllipsis(){return this.pagination.currentPage<=this.pagination.totalPages-3&&this.pagination.totalPages>=10},shouldShowPagination(){return this.pagination.totalPages===void 0||this.pagination.count===0?!1:this.pagination.totalPages>1}},methods:{isActive(a){return(this.pagination.currentPage||1)===a},pageClicked(a){a==="..."||a===this.pagination.currentPage||a>this.pagination.totalPages||a<1||this.$emit("pageChange",a)},pageLinks(){const a=[];let t=2,e=this.pagination.totalPages-1;this.pagination.totalPages>=10&&(t=Math.max(1,this.pagination.currentPage-2),e=Math.min(this.pagination.currentPage+2,this.pagination.totalPages));for(let r=t;r<=e;r++)a.push(r);return a}}},re={key:0,class:"flex items-center justify-between px-4 py-3 bg-white border-t border-gray-200 sm:px-6"},ie={class:"flex justify-between flex-1 sm:hidden"},se={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},le={class:"text-sm text-gray-700"},oe={key:0,class:"font-medium"},de={key:1,class:"font-medium"},ue={key:0},ge={key:1},ce={key:2,class:"font-medium"},fe={class:"relative z-0 inline-flex -space-x-px rounded-md shadow-sm","aria-label":"Pagination"},he=g("span",{class:"sr-only"},"Previous",-1),ye={key:1,class:"relative inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300"},me=["onClick"],pe={key:2,class:"relative inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300"},be=g("span",{class:"sr-only"},"Next",-1);function xe(a,t,e,r,b,l){const u=T("BaseIcon");return l.shouldShowPagination?(i(),s("div",re,[g("div",ie,[g("a",{href:"#",class:f([{"disabled cursor-normal pointer-events-none !bg-gray-100 !text-gray-400":e.pagination.currentPage===1},"relative inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50"]),onClick:t[0]||(t[0]=o=>l.pageClicked(e.pagination.currentPage-1))}," Previous ",2),g("a",{href:"#",class:f([{"disabled cursor-default pointer-events-none !bg-gray-100 !text-gray-400":e.pagination.currentPage===e.pagination.totalPages},"relative inline-flex items-center px-4 py-2 ml-3 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50"]),onClick:t[1]||(t[1]=o=>l.pageClicked(e.pagination.currentPage+1))}," Next ",2)]),g("div",se,[g("div",null,[g("p",le,[P(" Showing "+c(" ")+" "),e.pagination.limit&&e.pagination.currentPage?(i(),s("span",oe,c(e.pagination.currentPage*e.pagination.limit-(e.pagination.limit-1)),1)):y("",!0),P(" "+c(" ")+" to "+c(" ")+" "),e.pagination.limit&&e.pagination.currentPage?(i(),s("span",de,[e.pagination.currentPage*e.pagination.limit<=e.pagination.totalCount?(i(),s("span",ue,c(e.pagination.currentPage*e.pagination.limit),1)):(i(),s("span",ge,c(e.pagination.totalCount),1))])):y("",!0),P(" "+c(" ")+" of "+c(" ")+" "),e.pagination.totalCount?(i(),s("span",ce,c(e.pagination.totalCount),1)):y("",!0),P(" "+c(" ")+" results ")])]),g("div",null,[g("nav",fe,[g("a",{href:"#",class:f([{"disabled cursor-normal pointer-events-none !bg-gray-100 !text-gray-400":e.pagination.currentPage===1},"relative inline-flex items-center px-2 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-l-md hover:bg-gray-50"]),onClick:t[2]||(t[2]=o=>l.pageClicked(e.pagination.currentPage-1))},[he,w(u,{name:"ChevronLeftIcon"})],2),l.hasFirst?(i(),s("a",{key:0,href:"#","aria-current":"page",class:f([{"z-10 bg-primary-50 border-primary-500 text-primary-600":l.isActive(1),"bg-white border-gray-300 text-gray-500 hover:bg-gray-50":!l.isActive(1)},"relative inline-flex items-center px-4 py-2 text-sm font-medium border"]),onClick:t[3]||(t[3]=o=>l.pageClicked(1))}," 1 ",2)):y("",!0),l.hasFirstEllipsis?(i(),s("span",ye," ... ")):y("",!0),(i(!0),s(k,null,C(l.pages,o=>(i(),s("a",{key:o,href:"#",class:f([{"z-10 bg-primary-50 border-primary-500 text-primary-600":l.isActive(o),"bg-white border-gray-300 text-gray-500 hover:bg-gray-50":!l.isActive(o),disabled:o==="..."},"relative items-center hidden px-4 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 hover:bg-gray-50 md:inline-flex"]),onClick:m=>l.pageClicked(o)},c(o),11,me))),128)),l.hasLastEllipsis?(i(),s("span",pe," ... ")):y("",!0),l.hasLast?(i(),s("a",{key:3,href:"#","aria-current":"page",class:f([{"z-10 bg-primary-50 border-primary-500 text-primary-600":l.isActive(e.pagination.totalPages),"bg-white border-gray-300 text-gray-500 hover:bg-gray-50":!l.isActive(e.pagination.totalPages)},"relative inline-flex items-center px-4 py-2 text-sm font-medium border"]),onClick:t[4]||(t[4]=o=>l.pageClicked(e.pagination.totalPages))},c(e.pagination.totalPages),3)):y("",!0),g("a",{href:"#",class:f(["relative inline-flex items-center px-2 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-r-md hover:bg-gray-50",{"disabled cursor-default pointer-events-none !bg-gray-100 !text-gray-400":e.pagination.currentPage===e.pagination.totalPages}]),onClick:t[5]||(t[5]=o=>l.pageClicked(e.pagination.currentPage+1))},[be,w(u,{name:"ChevronRightIcon"})],2)])])])])):y("",!0)}const ve=J(ne,[["render",xe]]),ke={class:"flex flex-col"},Ce={class:"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8 pb-4 lg:pb-0"},Pe={class:"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8"},we={class:"relative overflow-hidden bg-white border-b border-gray-200 shadow sm:rounded-lg"},_e=["onClick"],Se={key:0,class:"asc-direction"},Te={key:1,class:"desc-direction"},Ne={key:0},Be={key:1},Fe={key:0,class:"absolute top-0 left-0 z-10 flex items-center justify-center w-full h-full bg-white bg-opacity-60"},Le={key:1,class:"text-center text-gray-500 pb-2 flex h-[160px] justify-center items-center flex-col"},Ae={class:"block mt-1"},Ie={__name:"BaseTable",props:{columns:{type:Array,required:!0},data:{type:[Array,Function],required:!0},sortBy:{type:String,default:""},sortOrder:{type:String,default:""},tableClass:{type:String,default:"min-w-full divide-y divide-gray-200"},theadClass:{type:String,default:"bg-gray-50"},tbodyClass:{type:String,default:""},noResultsMessage:{type:String,default:"No Results Found"},loading:{type:Boolean,default:!1},loadingType:{type:String,default:"placeholder",validator:function(a){return["placeholder","spinner"].indexOf(a)!==-1}},placeholderCount:{type:Number,default:3}},setup(a,{expose:t}){const e=a;let r=N([]),b=F(!1),l=N(e.columns.map(n=>new ae(n))),u=N({fieldName:"",order:""}),o=F("");const m=L(()=>Array.isArray(e.data)),x=L(()=>{if(!m.value||u.fieldName===""||l.length===0)return r.value;const n=I(u.fieldName);return n?[...r.value].sort(n.getSortPredicate(u.order,l)):r.value});function I(n){return l.find(d=>d.key===n)}function z(n){let d="whitespace-nowrap px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider";return n.defaultThClass&&(d=n.defaultThClass),n.sortable?d=`${d} cursor-pointer`:d=`${d} pointer-events-none`,n.thClass&&(d=`${d} ${n.thClass}`),d}function B(n){let d="px-6 py-4 text-sm text-gray-500 whitespace-nowrap";return n.defaultTdClass&&(d=n.defaultTdClass),n.tdClass&&(d=`${d} ${n.tdClass}`),d}function D(n){let d="w-full";return n.placeholderClass&&(d=`${d} ${n.placeholderClass}`),d}function E(){return o.value=null,e.data}async function M(){const n=o.value&&o.value.currentPage||1;b.value=!0;const d=await e.data({sort:u,page:n});return b.value=!1,o.value=d.pagination,d.data}function R(n){u.fieldName!==n.key?(u.fieldName=n.key,u.order="asc"):u.order=u.order==="asc"?"desc":"asc",m.value||(o.value&&(o.value.currentPage=1),_())}async function _(){const n=m.value?E():await M();r.value=n.map(d=>new te(d,l))}async function Y(n){o.value.currentPage=n,await _()}async function H(n=!1){o.value&&!n&&(o.value.currentPage=1),await _()}function q(n,d){return $.get(n,d)}return m.value&&K(()=>e.data,()=>{_()}),Z(async()=>{await _()}),t({refresh:H}),(n,d)=>{const O=T("base-content-placeholders-text"),W=T("base-content-placeholders"),j=T("BaseIcon");return i(),s("div",ke,[g("div",Ce,[g("div",Pe,[g("div",we,[A(n.$slots,"header"),g("table",{class:f(a.tableClass)},[g("thead",{class:f(a.theadClass)},[g("tr",null,[(i(!0),s(k,null,C(p(l),h=>(i(),s("th",{key:h.key,class:f([z(h),{"text-bold text-black":p(u).fieldName===h.key}]),onClick:v=>R(h)},[P(c(h.label)+" ",1),p(u).fieldName===h.key&&p(u).order==="asc"?(i(),s("span",Se," ↑ ")):y("",!0),p(u).fieldName===h.key&&p(u).order==="desc"?(i(),s("span",Te," ↓ ")):y("",!0)],10,_e))),128))])],2),a.loadingType==="placeholder"&&(a.loading||p(b))?(i(),s("tbody",Ne,[(i(!0),s(k,null,C(a.placeholderCount,h=>(i(),s("tr",{key:h,class:f(h%2===0?"bg-white":"bg-gray-50")},[(i(!0),s(k,null,C(a.columns,v=>(i(),s("td",{key:v.key,class:f(["",B(v)])},[w(W,{class:f(D(v)),rounded:!0},{default:Q(()=>[w(O,{class:"w-full h-6",lines:1})]),_:2},1032,["class"])],2))),128))],2))),128))])):(i(),s("tbody",Be,[(i(!0),s(k,null,C(x.value,(h,v)=>(i(),s("tr",{key:v,class:f(v%2===0?"bg-white":"bg-gray-50")},[(i(!0),s(k,null,C(a.columns,S=>(i(),s("td",{key:S.key,class:f(["",B(S)])},[A(n.$slots,"cell-"+S.key,{row:h},()=>[P(c(q(h.data,S.key)),1)])],2))),128))],2))),128))]))],2),a.loadingType==="spinner"&&(a.loading||p(b))?(i(),s("div",Fe,[w(U,{class:"w-10 h-10 text-primary-500"})])):!a.loading&&!p(b)&&x.value&&x.value.length===0?(i(),s("div",Le,[w(j,{name:"ExclamationCircleIcon",class:"w-6 h-6 text-gray-400"}),g("span",Ae,c(a.noResultsMessage),1)])):y("",!0),p(o)?(i(),X(ve,{key:2,pagination:p(o),onPageChange:Y},null,8,["pagination"])):y("",!0)])])])])}}};export{Ie as default};
